
[<%= @name %>]
comment = <%= @comment %>
path = <%= @path %>
use chroot = <%= @use_chroot %>
max connections = <%= @max_connections %>
max verbosity = <%= @max_verbosity %>
lock file = <%= @lock_file %>
read only = <%= @read_only %>
write only = <%= @write_only %>
list = <%= @list %>
uid = <%= @uid %>
gid = <%= @gid %>
outgoing chmod = <%= @outgoing_chmod %>
ignore nonreadable = <%= @ignore_nonreadable %>
transfer logging = <%= @transfer_logging %>
log format = <%= @log_format %>
dont compress = <%= Array(@dont_compress).join(' ') %>
hosts allow = <%= Array(@hosts_allow).join(',') %>
hosts deny = <%= Array(@hosts_deny).join(',') %>
<% if @auth_users or @user_pass -%>
auth users = <%= @auth_users.to_a.empty? ? 'all:deny' : @auth_users.map { |entry| [entry].flatten[0] }.join(',') %>
secrets file = /etc/rsync/<%= @name %>.rsyncd.secrets
<% end -%>
